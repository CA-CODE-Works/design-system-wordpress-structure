function mobileView(){const e=document.querySelector(".site-header .grid-mobile-icons");return!!e&&"none"!==getComputedStyle(e).display}class CAGovSiteNavigation extends window.HTMLElement{connectedCallback(){document.querySelector(".cagov-nav.open-menu").addEventListener("click",this.toggleMainMenu.bind(this));const e=document.querySelector(".cagov-nav.mobile-search .search-btn");e&&(e.setAttribute("aria-expanded","false"),document.querySelector(".search-container--small .site-search input").setAttribute("tabindex","-1"),document.querySelector(".search-container--small .site-search button.search-submit").setAttribute("tabindex","-1"),document.querySelector(".search-container--small").setAttribute("aria-hidden","true"),mobileView()&&e.addEventListener("click",(()=>{document.querySelector(".search-container--small").classList.toggle("hidden-search");document.querySelector(".search-container--small").classList.contains("hidden-search")?(e.setAttribute("aria-expanded","false"),document.querySelector(".search-container--small .site-search input").setAttribute("tabindex","-1"),document.querySelector(".search-container--small .site-search button.search-submit").setAttribute("tabindex","-1"),document.querySelector(".search-container--small").setAttribute("aria-hidden","true")):(e.setAttribute("aria-expanded","true"),document.querySelector(".search-container--small .site-search input").focus(),document.querySelector(".search-container--small .site-search input").removeAttribute("tabindex"),document.querySelector(".search-container--small .site-search button.search-submit").removeAttribute("tabindex"),document.querySelector(".search-container--small").setAttribute("aria-hidden","false"))}))),window.addEventListener("resize",(()=>{document.querySelector(".search-container--small").classList.add("hidden-search"),e&&document.querySelector(".cagov-nav.mobile-search .search-btn").setAttribute("aria-expanded","false"),document.querySelector(".search-container--small .site-search input").setAttribute("tabindex","-1"),document.querySelector(".search-container--small .site-search button.search-submit").setAttribute("tabindex","-1"),document.querySelector(".search-container--small").setAttribute("aria-hidden","true"),this.closeAllMenus(),this.closeMainMenu()})),this.expansionListeners(),document.addEventListener("keydown",this.escapeMainMenu.bind(this)),document.body.addEventListener("click",this.bodyClick.bind(this)),this.highlightCurrentPage()}toggleMainMenu(){document.querySelector(".cagov-nav.hamburger").classList.contains("is-active")?this.closeMainMenu():this.openMainMenu()}highlightCurrentPage(){this.querySelectorAll("a.expanded-menu-dropdown-link").forEach((e=>{e.href===window.location.href&&e.classList.add("current-page-highlight")}))}openMainMenu(){document.querySelector(".mobile-icons").classList.add("display-menu"),this.classList.add("display-menu"),document.querySelector(".cagov-nav.hamburger").classList.add("is-active"),document.querySelector(".cagov-nav.menu-trigger").classList.add("is-fixed"),document.querySelector(".cagov-nav.menu-trigger").setAttribute("aria-expanded","true");const e=document.querySelector(".cagov-nav.menu-trigger-label");e.innerHTML=e.getAttribute("data-closelabel")}closeMainMenu(){document.querySelector(".mobile-icons").classList.remove("display-menu"),this.classList.remove("display-menu"),document.querySelector(".cagov-nav.hamburger").classList.remove("is-active"),document.querySelector(".cagov-nav.menu-trigger").classList.remove("is-fixed"),document.querySelector(".cagov-nav.menu-trigger").setAttribute("aria-expanded","false");const e=document.querySelector(".cagov-nav.menu-trigger-label");e.innerHTML=e.getAttribute("data-openlabel")}escapeMainMenu(e){27===e.keyCode&&this.closeAllMenus()}bodyClick(e){e.target.closest("cagov-site-navigation")||this.closeAllMenus()}closeAllMenus(){this.querySelectorAll(".js-cagov-navoverlay-expandable").forEach((e=>{e.querySelector(".expanded-menu-section").classList.remove("expanded");const t=e.querySelector(".expanded-menu-dropdown");if(t&&t.id&&e.querySelector(`button[aria-controls=${t.id}]`)&&e.querySelector(`button[aria-controls=${t.id}]`).setAttribute("aria-expanded","false"),t){t.setAttribute("aria-hidden","true");t.querySelectorAll("a").forEach((e=>{e.setAttribute("tabindex","-1")}))}}))}expansionListeners(){this.querySelectorAll(".js-cagov-navoverlay-expandable").forEach((e=>{const t=e.querySelector(".expanded-menu-section");if(t){const a=t.querySelector(".expanded-menu-dropdown");a&&(a.setAttribute("aria-hidden","true"),a&&a.id&&e.querySelector(`button[aria-controls=${a.id}]`)&&e.querySelector(`button[aria-controls=${a.id}]`).setAttribute("aria-expanded","false"))}const a=this;e.addEventListener("click",(function(t){"A"!==t.target.nodeName&&t.preventDefault();const r=this.querySelector(".expanded-menu-section");if(r)if(r.classList.contains("expanded"))a.closeAllMenus();else{a.closeAllMenus(),r.classList.add("expanded");const t=this.querySelector(".expanded-menu-dropdown");if(t&&t.id&&e.querySelector(`button[aria-controls=${t.id}]`)&&e.querySelector(`button[aria-controls=${t.id}]`).setAttribute("aria-expanded","true"),t){t.setAttribute("aria-hidden","false");t.querySelectorAll("a").forEach((e=>{e.removeAttribute("tabindex")}))}}}))}))}}window.customElements.define("cagov-site-navigation",CAGovSiteNavigation);